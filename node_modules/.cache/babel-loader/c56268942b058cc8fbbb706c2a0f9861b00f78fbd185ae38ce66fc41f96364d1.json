{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{useGoogleLogin}from\"@react-oauth/google\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(null);const[email,setEmail]=useState(null);const[subject,setSubject]=useState(\"\");const[message,setMessage]=useState(\"\");const[file,setFile]=useState(null);// Correct access-token based login flow\nconst login=useGoogleLogin({scope:\"https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.email\",flow:\"implicit\",// optional but safe to keep\nonSuccess:async tokenResponse=>{try{setToken(tokenResponse.access_token);// Get user email from token\nconst res=await axios.get(\"https://www.googleapis.com/oauth2/v3/userinfo\",{headers:{Authorization:`Bearer ${tokenResponse.access_token}`}});setEmail(res.data.email);}catch(err){alert(\"Failed to fetch user info\");}},onError:()=>alert(\"Login failed. Please try again.\")});const sendMail=async()=>{if(!file||!subject||!message||!token){alert(\"All fields are required!\");return;}const formData=new FormData();formData.append(\"file\",file);formData.append(\"subject\",subject);formData.append(\"message\",message);try{const res=await axios.post(\"http://localhost:8081/api/mail/send\",formData,{headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"multipart/form-data\"}});alert(res.data);}catch(err){var _err$response;alert(\"Failed to send email: \"+(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"\\uD83D\\uDCE7 Gmail Sender App\"}),!token?/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>login(),className:\"send-btn\",children:\"\\uD83D\\uDD10 Sign in with Google\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"welcome-msg\",children:[\"Welcome, \",email]}),/*#__PURE__*/_jsx(\"label\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:subject,onChange:e=>setSubject(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{value:message,onChange:e=>setMessage(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Attach a File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMail,className:\"send-btn\",children:\"\\uD83D\\uDE80 Send Email\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","axios","useGoogleLogin","jsx","_jsx","jsxs","_jsxs","App","token","setToken","email","setEmail","subject","setSubject","message","setMessage","file","setFile","login","scope","flow","onSuccess","tokenResponse","access_token","res","get","headers","Authorization","data","err","alert","onError","sendMail","formData","FormData","append","post","_err$response","response","className","children","onClick","type","value","onChange","e","target","files"],"sources":["D:/Project/MailApp/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useGoogleLogin } from \"@react-oauth/google\";\nimport \"./App.css\";\n\nfunction App() {\n  const [token, setToken] = useState(null);\n  const [email, setEmail] = useState(null);\n  const [subject, setSubject] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [file, setFile] = useState(null);\n\n  // Correct access-token based login flow\n  const login = useGoogleLogin({\n    scope: \"https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.email\",\n    flow: \"implicit\", // optional but safe to keep\n    onSuccess: async (tokenResponse) => {\n      try {\n        setToken(tokenResponse.access_token);\n\n        // Get user email from token\n        const res = await axios.get(\"https://www.googleapis.com/oauth2/v3/userinfo\", {\n          headers: {\n            Authorization: `Bearer ${tokenResponse.access_token}`,\n          },\n        });\n\n        setEmail(res.data.email);\n      } catch (err) {\n        alert(\"Failed to fetch user info\");\n      }\n    },\n    onError: () => alert(\"Login failed. Please try again.\"),\n  });\n\n  const sendMail = async () => {\n    if (!file || !subject || !message || !token) {\n      alert(\"All fields are required!\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"subject\", subject);\n    formData.append(\"message\", message);\n\n    try {\n      const res = await axios.post(\"http://localhost:8081/api/mail/send\", formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n      alert(res.data);\n    } catch (err) {\n      alert(\"Failed to send email: \" + (err.response?.data || err.message));\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"title\">üìß Gmail Sender App</h1>\n\n      {!token ? (\n        <div className=\"login-box\">\n          <button onClick={() => login()} className=\"send-btn\">\n            üîê Sign in with Google\n          </button>\n        </div>\n      ) : (\n        <div className=\"form-box\">\n          <p className=\"welcome-msg\">Welcome, {email}</p>\n\n          <label>Subject</label>\n          <input\n            type=\"text\"\n            value={subject}\n            onChange={(e) => setSubject(e.target.value)}\n          />\n\n          <label>Message</label>\n          <textarea\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n\n          <label>Attach a File</label>\n          <input type=\"file\" onChange={(e) => setFile(e.target.files[0])} />\n\n          <button onClick={sendMail} className=\"send-btn\">\n            üöÄ Send Email\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}